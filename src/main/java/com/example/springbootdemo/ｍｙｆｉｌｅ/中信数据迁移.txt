
测试系统

迁移原则：
1. 进行数据备份
2. 确保数据的准确性，唯一性，完整性。（）


1. 旧系统会上线新功能，新系统有新功能测试。
2. 分批上线。
3. 在途数据，结构变化的数据最好完成全流程再迁移。
4. 上线方案（分批上线-表隔离校验/全量上线-功能全，时间长/双跑）  -->  迁移方案 （/）
5. 旧系统除必要功能尽量不要进行功能迭代了
6. 申请一个在生产环境只有读权限的账号进行操作


事前准备：
一: 确定迁移方案
	1. 是否要停机迁移（默认会进行停机迁移，大致确认停机窗口期）
	2. 根据数据量确认迁移窗口期是进行全量数据一次迁移/部分迁移
	3. 异构数据迁移脚本准备
	4. 确认数据迁移完成后的轮班观察系统稳定性的方案
	5. 迁移失败及时回退方案确定
二：确认校验方案
	1. 重要数据逐条确认，不重要数据行数校验脚本开发
	2. 统计数据总量，确保同时多线程迁移带宽足够性能测试
	3. 分功能进行测试数据迁移后的功能测试。（最好是进行双跑测试）
	4. 大致估算停机窗口期时间可以完成数据迁移，校验，失败回退
	5. 校验结构变化的在途数据已完成全流程。
	6. 迁移异常，迁移回滚脚本。
	7. 全流程脚本多次测试结果。
	8. 数据备份脚本。
	9. 校验两个库字符集一致或者超集。
	

事中执行：
	1. 提前一天进行完整功能回归测试。
	2. 提前清理要切换库的脏数据。校验清理后的数据准确性。
	3. 确保系统彻底停机，数据库数据不在变化。
	4. 启动脚本补增量数据，移部分全量数据表。
	5. 优先校验重要数据，然后校验不重要数据。
	6. 切新系统。
	

事后：
	1. 按方案进行及时轮班观察系统稳定性。
	2. 在途单完成性监控。
	2. 回顾，总结。




问题清单
一：
	1. 数据量？
		270G数据，500张表, 主从库
	2. 可否停机？
		上线可停机切换
	3. 可否一次性切换？
		是一次性切换
	4. 数据备份和灾备用的什么？
		
		
二：
	





建一套空表
1. （清理对应库/表/重建对应表）表结构迁移
2. 表结构重建
3. 原表拆解












checklist
	


	















